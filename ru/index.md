---
layout: Почта
title: Ориентированные на пользователя показатели производительности
authors:
  - Philipwalton
date: '2019-11-08'
description: |2

  Ориентированные на пользователя показатели производительности   - важный инструмент для понимания и

  улучшить восприятие вашего сайта таким образом, чтобы это принесло реальную пользу

  пользователей.
tags:
  - представление
  - метрики
---

Все мы слышали, насколько важна производительность. Но что конкретно мы имеем в виду, когда говорим о производительности - и о том, как сделать веб-сайты «быстрыми»?

Правда в том, что производительность относительна:

- Сайт может быть быстрым для одного пользователя (в быстрой сети с мощным устройством), но медленным для другого пользователя (в медленной сети с устройством низкого уровня).
- Два сайта могут завершить загрузку в одно и то же время, но может *показаться,* что один загружается быстрее (если он загружает контент постепенно, а не ждет до конца, чтобы отобразить что-либо).
- Может *показаться,* что сайт загружается быстро, но затем медленно (или вообще не реагирует) на действия пользователя.

Поэтому, говоря о производительности, важно быть точным и относиться к производительности с точки зрения объективных критериев, которые можно измерить количественно. Эти критерии известны как *метрики* .

Но то, что метрика основана на объективных критериях и может быть измерена количественно, не обязательно означает, что эти измерения полезны.

## Определение показателей

Исторически веб-производительность измерялась с помощью события <code>[load](https://developer.mozilla.org/en-US/docs/Web/API/Window/load_event)</code> Однако, несмотря на то, что <code>load</code> является четко определенным моментом жизненного цикла страницы, этот момент не обязательно соответствует тому, что волнует пользователя.

Например, сервер может ответить минимальной страницей, которая «загружается» немедленно, но затем откладывает выборку содержимого и отображение чего-либо на странице до нескольких секунд после срабатывания события `load` Хотя технически такая страница может иметь быстрое время загрузки, это время не будет соответствовать тому, как пользователь на самом деле воспринимает загрузку страницы.

За последние несколько лет члены команды Chrome в сотрудничестве с [W3C Web Performance Working Group](https://www.w3.org/webperf/) работали над стандартизацией набора новых API и показателей, которые более точно измеряют, как пользователи воспринимают производительность веб-страницы.

Чтобы убедиться, что показатели актуальны для пользователей, мы формулируем их вокруг нескольких ключевых вопросов:

<table id="questions">
  <tr>
    <td><strong>Это происходит?</strong></td>
    <td>Навигация началась успешно? Сервер ответил?</td>
  </tr>
  <tr>
    <td><strong>Это полезно?</strong></td>
    <td>Достаточно ли отрисованного контента, чтобы пользователи могли с ним взаимодействовать?</td>
  </tr>
  <tr>
    <td><strong>Это можно использовать?</strong></td>
    <td>Могут ли пользователи взаимодействовать со страницей или она занята?</td>
  </tr>
  <tr>
    <td><strong>Это восхитительно?</strong></td>
    <td>Являются ли взаимодействия плавными и естественными, без задержек и рывков?</td>
  </tr>
</table>

## Как измеряются метрики

Метрики производительности обычно измеряются одним из двух способов:

- **В лаборатории:** использование инструментов для имитации загрузки страницы в согласованной контролируемой среде.
- **В поле** : на реальных пользователях, фактически загружающих страницу и взаимодействующих с ней.

Ни один из этих вариантов не обязательно лучше или хуже другого - на самом деле, обычно вы хотите использовать оба, чтобы обеспечить хорошую производительность.

### В лаборатории

Тестирование производительности в лабораторных условиях имеет важное значение при разработке новых функций. До того, как функции будут выпущены в производство, невозможно измерить их характеристики производительности на реальных пользователях, поэтому тестирование их в лабораторных условиях до выпуска функции - лучший способ предотвратить снижение производительности.

### В поле

С другой стороны, хотя лабораторное тестирование является разумным показателем производительности, оно не обязательно отражает то, как все пользователи воспринимают ваш сайт в реальных условиях.

Производительность сайта может сильно различаться в зависимости от возможностей устройства пользователя и условий его сети. Он также может варьироваться в зависимости от того, взаимодействует ли (или как) пользователь со страницей.

Более того, загрузка страниц не может быть детерминированной. Например, сайты, загружающие персонализированный контент или рекламу, могут иметь совершенно разные характеристики производительности от пользователя к пользователю. Лабораторный тест не выявит этих различий.

Единственный способ по-настоящему узнать, как ваш сайт работает для ваших пользователей, - это реально измерить его производительность, когда эти пользователи загружаются и взаимодействуют с ним. Этот тип измерения обычно называется [мониторингом реального пользователя](https://en.wikipedia.org/wiki/Real_user_monitoring) или сокращенно RUM.

## Типы метрик

Есть несколько других типов показателей, которые имеют отношение к тому, как пользователи воспринимают производительность.

- **Воспринимаемая скорость загрузки:** насколько быстро страница может загружаться и отображать все визуальные элементы на экране.
- **Отзывчивость** при загрузке: насколько быстро страница может загружать и выполнять любой требуемый код JavaScript, чтобы компоненты быстро реагировали на взаимодействие с пользователем.
- **Отзывчивость во время выполнения:** как быстро страница может реагировать на взаимодействие с пользователем после загрузки страницы.
- **Визуальная стабильность: изменяются** ли элементы на странице неожиданным для пользователей образом и потенциально мешают их взаимодействию?
- **Плавность:** отображаются ли переходы и анимация с постоянной частотой кадров и плавно ли переходят из одного состояния в другое?

Учитывая все вышеперечисленные типы показателей производительности, мы надеемся, что ясно, что ни одной единственной метрики недостаточно, чтобы охватить все характеристики производительности страницы.

## Важные показатели для измерения

- **[Первая отрисовка содержимого (FCP)](/fcp/) :** измеряет время от начала загрузки страницы до отображения на экране любой части содержимого страницы. *( [лаборатория](#in-the-lab) , [поле](#in-the-field) )*
- **[Наибольшая отрисовка содержимого (LCP)](/lcp/) :** измеряет время с момента начала загрузки страницы до момента, когда на экране отображается самый большой текстовый блок или элемент изображения. *( [лаборатория](#in-the-lab) , [поле](#in-the-field) )*
- **[Первая задержка ввода (FID)](/fid/) :** измеряет время с момента, когда пользователь впервые взаимодействует с вашим сайтом (т. Е. Когда он щелкает ссылку, нажимает кнопку или использует настраиваемый элемент управления на основе JavaScript) до момента, когда браузер действительно может чтобы ответить на это взаимодействие. *( [поле](#in-the-field) )*
- **[Время до интерактивности (TTI)](/tti/) :** измеряет время с момента начала загрузки страницы до момента ее визуального отображения, загрузки ее начальных сценариев (если таковые имеются) и способности быстро надежно реагировать на ввод пользователя. *( [лаборатория](#in-the-lab) )*
- **[Общее время блокировки (TBT)](/tbt/) :** измеряет общее количество времени между FCP и TTI, когда основной поток был заблокирован на достаточно долгое время, чтобы предотвратить реакцию на ввод. *( [лаборатория](#in-the-lab) )*
- **[Накопительный сдвиг макета (CLS)](/cls/) :** измеряет совокупную оценку всех неожиданных сдвигов макета, которые происходят между моментом начала загрузки страницы и [изменением ее состояния жизненного цикла](https://developers.google.com/web/updates/2018/07/page-lifecycle-api) на скрытое. *( [лаборатория](#in-the-lab) , [поле](#in-the-field) )*

Хотя этот список включает метрики, измеряющие многие из различных аспектов производительности, относящихся к пользователям, он не включает все (например, время отклика и плавность выполнения в настоящее время не рассматриваются).

В некоторых случаях будут введены новые метрики, чтобы охватить недостающие области, но в других случаях лучшими метриками являются те, которые специально предназначены для вашего сайта.

## Пользовательские метрики

Перечисленные выше показатели производительности позволяют получить общее представление о характеристиках производительности большинства сайтов в Интернете. Они также хороши тем, что имеют общий набор показателей для сайтов, позволяющих сравнивать их эффективность с конкурентами.

Однако могут быть случаи, когда конкретный сайт в некотором роде уникален, что требует дополнительных показателей для получения полной картины производительности. Например, метрика LCP предназначена для измерения того, когда основное содержимое страницы завершило загрузку, но могут быть случаи, когда самый большой элемент не является частью основного содержимого страницы, и, следовательно, LCP может не иметь значения.

Для решения таких случаев рабочая группа по веб-производительности также стандартизировала API нижнего уровня, которые могут быть полезны для реализации ваших собственных пользовательских показателей:

- [User Timing API](https://w3c.github.io/user-timing/)
- [API долгих задач](https://w3c.github.io/longtasks/)
- [Element Timing API](https://wicg.github.io/element-timing/)
- [API времени навигации](https://w3c.github.io/navigation-timing/)
- [Resource Timing API](https://w3c.github.io/resource-timing/)
- [Серверное время](https://w3c.github.io/server-timing/)

Обратитесь к руководству по [специальным показателям,](/custom-metrics/) чтобы узнать, как использовать эти API для измерения характеристик производительности, характерных для вашего сайта.
